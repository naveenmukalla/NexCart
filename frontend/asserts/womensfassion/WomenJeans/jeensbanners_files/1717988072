var GlobalEventBus=GlobalEventBus||new Vue();Vue.component('SearchResult',{data:function(){return{searchResult:null,searchProductOptions:{arrows:!1,slidesToShow:1.5,slidesToScroll:1,infinite:!1,mobileFirst:!0,responsive:[{breakpoint:ps.breakpoints.sm,settings:{slidesToShow:2.5,slidesToScroll:2,},},{breakpoint:ps.breakpoints.lg,settings:{slidesToShow:5,slidesToScroll:5,},},],},}},computed:{viewAllUrl:function(){return'/search?q='+(this.searchResult.query||'')},},mounted:function(){GlobalEventBus.$on('search:results',this.setResults);GlobalEventBus.$on('search:hide',this.resetResults)},updated:function(){this.initSlider()},beforeUnmount:function(){GlobalEventBus.$off('search-result:show',this.setResults);GlobalEventBus.$off('search:hide',this.resetResults);GlobalEventBus.$emit('search-results:hide');this.resetResults()},methods:{setResults:function(searchResult){this.resetResults();this.searchResult=searchResult;this.$nextTick(function(){GlobalEventBus.$emit('search-results:show')})},resetResults:function(){this.searchResult=null;if(this.$refs.searchProducts&&this.$refs.searchProducts.$el.classList.contains('slick-initialized')){this.$refs.searchProducts.destroy()}},initSlider:function(){if(this.$refs.searchProducts&&!this.$refs.searchProducts.$el.classList.contains('slick-initialized')){this.$refs.searchProducts.create();$(this.$refs.searchProducts.$el).verticallyPosition({elem:'.s-slider-arrow',position:'centre',})}},},template:'#vc-component-site-search-result',});Vue.component('SearchInput',{name:'Search',data:function(){return{searchTerm:'',searchResult:null,timer:null,active:!0,}},mounted:function(){this.$nextTick(()=>{this.$refs.input.focus()})},methods:{autofill:function(){this.searchTerm=this.searchResult.completion||this.searchTerm},doSearch:function(fromKeyPress=!0){if(this.searchTerm.length<2){return}
clearInterval(this.timer);this.timer=setTimeout(()=>{this.getSearchResult(this.searchTerm).done((response)=>{if(this.searchTerm!==response.query&&response.query!==''&&fromKeyPress){this.doSearch(!1);return}
this.searchResult=response;if(response.emptyresult){var gaData={eventCategory:'Home Page',eventAction:'Search',eventLabel:'No Result',};$(document).trigger('psevent',['searchNoResults',gaData])}
GlobalEventBus.$emit('search:results',this.searchResult);GlobalEventBus.$emit('search:term',this.searchTerm)})},300)},getSearchResult:function(searchTerm){return $.get('/typeahead/'+encodeURIComponent(searchTerm))},resetSearch:function(){this.searchTerm='';this.searchResult={};this.hideSearch()},hideSearch:function(){GlobalEventBus.$emit('search:hide');GlobalEventBus.$emit('search-results:hide')},},template:'#vc-component-site-search-input',})